<div class="selection-panel {{ isVisible ? 'visible' : 'hidden' }}" 
     data-controller="selection-panel"
     {{ attributes }}>
    
    {% if isVisible and (selectedHex is not null or selectedUnit is not null) %}
        <div class="selection-header">
            <span class="selection-title">Selection</span>
            <button class="selection-close" 
                    type="button"
                    data-action="live#action"
                    data-live-action-param="clearSelection">
                &times;
            </button>
        </div>
        
        <div class="selection-content">
            <div class="selection-info">
                {% if selectedHex is not null %}
                    <div class="object-type">Field</div>
                    <div class="object-name">Field: {{ selectedHex.terrainName ?? 'Unknown terrain' }}</div>
                    <div class="object-position">
                        Position: ({{ selectedHex.position.row ?? 0 }}, {{ selectedHex.position.col ?? 0 }})
                    </div>
                    <div class="object-details">
                        <div class="detail-row">
                            <span class="detail-label">Terrain:</span>
                            <span class="detail-value">{{ selectedHex.terrainName ?? 'Unknown' }}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Movement cost:</span>
                            <span class="detail-value">{{ selectedHex.movementCost ?? 0 }}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Defense:</span>
                            <span class="detail-value">{{ selectedHex.defense ?? 0 }}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Resources:</span>
                            <span class="detail-value">{{ selectedHex.resources ?? 0 }}</span>
                        </div>
                    </div>
                {% elseif selectedUnit is not null %}
                    <div class="object-type">Unit</div>
                    <div class="object-name">{{ selectedUnit.type ?? 'Unknown unit' }} ({{ selectedUnit.ownerId ?? 'Unknown player' }})</div>
                    <div class="object-position">
                        Position: ({{ selectedUnit.position.x ?? 0 }}, {{ selectedUnit.position.y ?? 0 }})
                    </div>
                    <div class="object-details">
                        <div class="detail-row">
                            <span class="detail-label">Type:</span>
                            <span class="detail-value">{{ selectedUnit.type ?? 'Unknown' }}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Owner:</span>
                            <span class="detail-value">{{ selectedUnit.ownerId ?? 'Unknown' }}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Movement points:</span>
                            <span class="detail-value">{{ selectedUnit.movementRange ?? 0 }}</span>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    {% endif %}
</div> 